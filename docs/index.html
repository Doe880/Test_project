<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Cat Facts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      margin:2rem;
      line-height:1.5
    }
    .box{
      max-width:640px;
      margin:auto;
      padding:1rem;
      border:1px solid #ddd;
      border-radius:12px
    }
    button,select{
      font-size:1rem;
      padding:.5rem .8rem;
      border-radius:.6rem;
      border:1px solid #ccc;
      cursor:pointer
    }
    #fact{
      margin-top:1rem;
      font-size:1.1rem
    }
    img{
      display:block;
      max-width:100%;
      height:auto;
      border-radius:12px;
      margin:.5rem 0 1rem
    }

    /* --- –°–¢–ò–õ–ò –î–õ–Ø –†–ê–ó–ù–û–¶–í–ï–¢–ù–û–ì–û –ó–ê–ì–û–õ–û–í–ö–ê --- */
    .box h1 span {
      display: inline-block;
    }

    /* –†–∞—Å–∫—Ä–∞—à–∏–≤–∞–µ–º –∫–∞–∂–¥—É—é –±—É–∫–≤—É */
    .c1 { color: #FF0000; } /* –ö—Ä–∞—Å–Ω—ã–π */
    .c2 { color: #FF8800; } /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
    .c3 { color: #FFEE00; } /* –ñ–µ–ª—Ç—ã–π */
    .c4 { color: #00FF00; } /* –ó–µ–ª–µ–Ω—ã–π (–ø—Ä–æ–±–µ–ª) */
    .c5 { color: #00CCFF; } /* –ì–æ–ª—É–±–æ–π */
    .c6 { color: #0066FF; } /* –°–∏–Ω–∏–π */
    .c7 { color: #AA00FF; } /* –§–∏–æ–ª–µ—Ç–æ–≤—ã–π */
    .c8 { color: #FF00FF; } /* –ü—É—Ä–ø—É—Ä–Ω—ã–π */
    .c9 { color: #FF0000; } /* –ö—Ä–∞—Å–Ω—ã–π */
    .c10 { color: #FF8800; } /* –û—Ä–∞–Ω–∂–µ–≤—ã–π (—ç–º–æ–¥–∑–∏) */

    /* --- –ë–ï–ì–ê–Æ–©–ò–ô –ö–û–¢ --- */

    :root {
      --cat-speed: 7s; /* –±–∞–∑–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –±–µ–≥–∞ */
    }

    .cat-run {
      position: fixed;
      bottom: 10px;
      left: -120px;
      font-size: 60px;
      pointer-events: none;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
      animation-duration: var(--cat-speed);
    }

    .cat-run.forward {
      animation-name: cat-run-right;
    }

    .cat-run.backward {
      animation-name: cat-run-left;
    }

    /* –í–ø—Ä–∞–≤–æ —Å –ª—ë–≥–∫–∏–º–∏ "–ø—Ä—ã–∂–∫–∞–º–∏" */
    @keyframes cat-run-right {
      0%   { transform: translateX(-10vw) translateY(0); }
      20%  { transform: translateX(10vw)  translateY(-15px); }
      40%  { transform: translateX(30vw)  translateY(0); }
      60%  { transform: translateX(50vw)  translateY(-20px); }
      80%  { transform: translateX(80vw)  translateY(0); }
      100% { transform: translateX(110vw) translateY(-10px); }
    }

    /* –í–ª–µ–≤–æ —Å —Ç–µ–º–∏ –∂–µ –ø—Ä—ã–∂–∫–∞–º–∏, —Ç–æ–ª—å–∫–æ –∑–µ—Ä–∫–∞–ª—å–Ω–æ */
    @keyframes cat-run-left {
      0%   { transform: translateX(110vw) translateY(0) scaleX(-1); }
      20%  { transform: translateX(80vw)  translateY(-15px) scaleX(-1); }
      40%  { transform: translateX(50vw)  translateY(0) scaleX(-1); }
      60%  { transform: translateX(30vw)  translateY(-20px) scaleX(-1); }
      80%  { transform: translateX(10vw)  translateY(0) scaleX(-1); }
      100% { transform: translateX(-10vw) translateY(-10px) scaleX(-1); }
    }

    /* --- –°–ª–µ–¥—ã –æ—Ç –ª–∞–ø–æ–∫ --- */

    .paw-trail {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      pointer-events: none;
      overflow: visible;
      z-index: -1;
    }

    .paw {
      position: absolute;
      bottom: 6px;
      font-size: 22px;
      opacity: 0;
      animation: paw-fade 3s ease-out forwards;
    }

    @keyframes paw-fade {
      0%   { opacity: 0; transform: translateY(0); }
      20%  { opacity: 1; transform: translateY(-4px); }
      100% { opacity: 0; transform: translateY(-26px); }
    }
  </style>
</head>
<body>

  <div class="paw-trail" id="paw-trail"></div>

  <div class="cat-run forward" id="runner">üêàüí®</div>

  <div class="box">

    <h1>
      <span class="c1">C</span><span class="c2">a</span><span class="c3">t</span>
      <span class="c4"> </span>
      <span class="c5">F</span><span class="c6">a</span><span class="c7">c</span><span class="c8">t</span><span class="c9">s</span>
      <span class="c10"> üò∫</span>
    </h1>

    <img src="" alt="cat" id="catimg">
    <div>
      –Ø–∑—ã–∫:
      <select id="lang">
        <option value="en">English</option>
        <option value="ru" selected>–†—É—Å—Å–∫–∏–π</option>
      </select>
      <button id="btn">–ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–∫—Ç</button>
    </div>
    <div id="fact">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —Ñ–∞–∫—Ç –æ –∫–æ—Ç–∞—Ö.</div>
  </div>

  <script>
    const API = "https://test-project-x6bt.onrender.com";

    const btn = document.getElementById('btn');
    const factBox = document.getElementById('fact');
    const langSel = document.getElementById('lang');
    const img = document.getElementById('catimg');

    function newCat() {
      img.src = API + "/catimg?ts=" + Date.now();
    }

    newCat();

    async function loadFact() {
      factBox.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';

      // —É—Å–∫–æ—Ä—è–µ–º –∫–æ—Ç–∞ –≤–æ –≤—Ä–µ–º—è "–ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–∫—Ç–∞"
      turboCat();

      newCat();
      try {
        const lang = langSel.value;
        const res = await fetch(API + '/fact?lang=' + encodeURIComponent(lang));
        const data = await res.json();
        factBox.textContent = data.fact || '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ñ–∞–∫—Ç.';
      } catch (e) {
        factBox.textContent = '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏.';
      }
    }

    btn.addEventListener('click', loadFact);

    /* üêà --- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ—Ç: –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Å–∫–æ—Ä–æ—Å—Ç—å --- */

    const runner = document.getElementById('runner');
    const pawTrail = document.getElementById('paw-trail');

    const kittyEmojis = [
      "üêàüí®",
      "üêà‚Äç‚¨õüí®",
      "üò∫",
      "üòº",
      "üòπ",
      "üôÄ",
      "üêæ",
      "üê±‚Äçüëì",
      "üòº",
      "üòΩ"
    ];

    function randomKitty() {
      const k = kittyEmojis[Math.floor(Math.random() * kittyEmojis.length)];
      runner.textContent = k;
    }

    function randomDirection() {
      // 50/50 –º–µ–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
      const toLeft = Math.random() < 0.5;
      runner.classList.toggle("forward", !toLeft);
      runner.classList.toggle("backward", toLeft);
    }

    function spawnPaw() {
      const span = document.createElement("span");
      span.className = "paw";
      span.textContent = "üêæ";
      // —Å–ª—É—á–∞–π–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
      span.style.left = (Math.random() * 90) + "vw";
      pawTrail.appendChild(span);
      setTimeout(() => {
        if (span.parentNode) pawTrail.removeChild(span);
      }, 3100);
    }

    function spawnPawBurst(count) {
      for (let i = 0; i < count; i++) {
        setTimeout(spawnPaw, i * 150);
      }
    }

    // –±–∞–∑–æ–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Å–ª–µ–¥—ã –Ω–∞ —Å—Ç–∞—Ä—Ç–µ
    randomKitty();
    spawnPawBurst(4);

    // –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ü–∏–∫–ª–∞ –∞–Ω–∏–º–∞—Ü–∏–∏:
    runner.addEventListener("animationiteration", () => {
      randomKitty();          // –º–µ–Ω—è–µ–º —ç–º–æ—Ü–∏—é
      randomDirection();      // –∏–Ω–æ–≥–¥–∞ –º–µ–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
      spawnPawBurst(3);       // –æ—Å—Ç–∞–≤–ª—è–µ–º —Å–ª–µ–¥—ã
    });

    // –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∫–æ—Ç–∞
    let turboTimeout = null;

    function turboCat() {
      document.documentElement.style.setProperty('--cat-speed', '3s');
      spawnPawBurst(5);
      if (turboTimeout) {
        clearTimeout(turboTimeout);
      }
      turboTimeout = setTimeout(() => {
        document.documentElement.style.setProperty('--cat-speed', '7s');
      }, 4000);
    }
  </script>

</body>
</html>